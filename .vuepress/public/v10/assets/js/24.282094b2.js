(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{379:function(_,v,t){"use strict";t.r(v);var e=t(25),a=Object(e.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[_._v("#")]),_._v(" API")]),_._v(" "),t("p",[_._v("API 是 CQHTTP 向用户提供的操作接口，用户可通过 HTTP 请求或 WebSocket 消息等方式调用 API。")]),_._v(" "),t("h2",{attrs:{id:"参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[_._v("#")]),_._v(" 参数")]),_._v(" "),t("p",[_._v("API 调用需要指定 action（要进行的动作）和动作所需的参数。")]),_._v(" "),t("p",[_._v("在后面的 API 描述中，action 在标题中给出，如 "),t("code",[_._v("send_private_msg")]),_._v("；参数在「参数」小标题下给出，其中「数据类型」使用 JSON 中的名字，例如 "),t("code",[_._v("string")]),_._v("、"),t("code",[_._v("number")]),_._v(" 等。")]),_._v(" "),t("p",[_._v("特别地，数据类型 "),t("code",[_._v("message")]),_._v(" 表示该参数是一个消息类型的参数，在调用 API 时，"),t("code",[_._v("message")]),_._v(" 类型的参数允许接受字符串、消息段数组、单个消息段对象三种类型的数据，关于消息格式的更多细节请查看 "),t("RouterLink",{attrs:{to:"/specs/message/"}},[_._v("消息")]),_._v("。")],1),_._v(" "),t("h2",{attrs:{id:"响应"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#响应"}},[_._v("#")]),_._v(" 响应")]),_._v(" "),t("p",[_._v("CQHTTP 会对每个 API 调用返回一个 JSON 响应（除非是 HTTP 状态码不为 200 的情况），响应中的 "),t("code",[_._v("data")]),_._v(" 字段包含 API 调用返回的数据内容。在后面的 API 描述中，将只给出 "),t("code",[_._v("data")]),_._v(" 字段的内容，放在「响应数据」小标题下，而不再赘述 "),t("code",[_._v("status")]),_._v("、"),t("code",[_._v("retcode")]),_._v(" 字段。")]),_._v(" "),t("h2",{attrs:{id:"异步调用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异步调用"}},[_._v("#")]),_._v(" 异步调用")]),_._v(" "),t("p",[_._v("所有 API 都可以通过给 action 附加后缀 "),t("code",[_._v("_async")]),_._v(" 来进行异步调用，例如 "),t("code",[_._v("send_private_msg_async")]),_._v("、"),t("code",[_._v("send_msg_async")]),_._v("、"),t("code",[_._v("clean_data_dir_async")]),_._v("。")]),_._v(" "),t("p",[_._v("异步调用的响应中，"),t("code",[_._v("status")]),_._v(" 字段为 "),t("code",[_._v("async")]),_._v("。")]),_._v(" "),t("p",[_._v("需要注意的是，虽然说以 "),t("code",[_._v("get_")]),_._v(" 开头的那些接口也可以进行异步调用，但实际上客户端没有办法得知最终的调用结果，所以对这部分接口进行异步调用是没有意义的；另外，有一些接口本身就是异步执行的（返回的 "),t("code",[_._v("status")]),_._v(" 为 "),t("code",[_._v("async")]),_._v("），此时使用 "),t("code",[_._v("_async")]),_._v(" 后缀来调用不会产生本质上的区别。")]),_._v(" "),t("h2",{attrs:{id:"限速调用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#限速调用"}},[_._v("#")]),_._v(" 限速调用")]),_._v(" "),t("p",[_._v("所有 API 都可以通过给 action 附加后缀 "),t("code",[_._v("_rate_limited")]),_._v(" 来进行限速调用，例如 "),t("code",[_._v("send_private_msg_rate_limited")]),_._v("、"),t("code",[_._v("send_msg_rate_limited")]),_._v("，不过主要还是用在发送消息接口上，以避免消息频率过快导致腾讯封号。所有限速调用将会以指定速度"),t("strong",[_._v("排队执行")]),_._v("，这个速度可在配置中指定。")]),_._v(" "),t("p",[_._v("限速调用的响应中，"),t("code",[_._v("status")]),_._v(" 字段为 "),t("code",[_._v("async")]),_._v("。")]),_._v(" "),t("h2",{attrs:{id:"相关配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#相关配置"}},[_._v("#")]),_._v(" 相关配置")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("配置项")]),_._v(" "),t("th",[_._v("默认值")]),_._v(" "),t("th",[_._v("说明")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[t("code",[_._v("api.rate_limit_interval")])]),_._v(" "),t("td",[t("code",[_._v("500")])]),_._v(" "),t("td",[_._v("限速 API 调用的排队间隔时间，单位毫秒")])])])])])}),[],!1,null,null,null);v.default=a.exports}}]);