(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{372:function(t,_,v){"use strict";v.r(_);var e=v(25),s=Object(e.a)({},(function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"事件上报"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#事件上报"}},[t._v("#")]),t._v(" 事件上报")]),t._v(" "),v("h2",{attrs:{id:"上报方式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报方式"}},[t._v("#")]),t._v(" 上报方式")]),t._v(" "),v("p",[t._v("当配置文件中 "),v("code",[t._v("post_url")]),t._v(" 配置项不为空时（"),v("strong",[t._v("无论 "),v("code",[t._v("use_http")]),t._v(" 是什么")]),t._v("），会将 CKYU 收到的事件通过 HTTP POST 上报，数据以 JSON 格式表示。上报的请求头中会包含一个 "),v("code",[t._v("X-Self-ID")]),t._v(" 头来表示当前正在上报的机器人 QQ 号，如：")]),t._v(" "),v("div",{staticClass:"language-http extra-class"},[v("pre",{pre:!0,attrs:{class:"language-http"}},[v("code",[t._v("POST / HTTP/1.1\n"),v("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("X-Self-ID:")]),t._v(" 123456\n")])])]),v("p",[t._v("如果 "),v("code",[t._v("secret")]),t._v(" 配置项也不为空，则会在每次上报的请求头中加入 HMAC 签名，如：")]),t._v(" "),v("div",{staticClass:"language-http extra-class"},[v("pre",{pre:!0,attrs:{class:"language-http"}},[v("code",[t._v("POST / HTTP/1.1\n"),v("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("X-Signature:")]),t._v(" sha1=f9ddd4863ace61e64f462d41ca311e3d2c1176e2\n"),v("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("X-Self-ID:")]),t._v(" 123456\n")])])]),v("p",[t._v("签名以 "),v("code",[t._v("secret")]),t._v(" 作为密钥，HTTP 正文作为消息，进行 HMAC SHA1 哈希，你的后端可以通过该哈希值来验证上报的数据确实来自 CQHTTP 插件。HMAC 介绍见 "),v("a",{attrs:{href:"https://zh.wikipedia.org/zh-cn/%E9%87%91%E9%91%B0%E9%9B%9C%E6%B9%8A%E8%A8%8A%E6%81%AF%E9%91%91%E5%88%A5%E7%A2%BC",target:"_blank",rel:"noopener noreferrer"}},[t._v("密钥散列消息认证码"),v("OutboundLink")],1),t._v("。")]),t._v(" "),v("h3",{attrs:{id:"hmac-sha1-校验的示例"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#hmac-sha1-校验的示例"}},[t._v("#")]),t._v(" HMAC SHA1 校验的示例")]),t._v(" "),v("h4",{attrs:{id:"python-flask"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#python-flask"}},[t._v("#")]),t._v(" Python + Flask")]),t._v(" "),v("div",{staticClass:"language-python extra-class"},[v("pre",{pre:!0,attrs:{class:"language-python"}},[v("code",[v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" hmac\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" flask "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Flask"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" request\n\napp "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Flask"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__name__"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),v("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@app"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" methods"),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("receive")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    sig "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hmac"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("new"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'<your-key>'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" request"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_data"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sha1'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hexdigest"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    received_sig "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-Signature'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),v("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sha1='")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" sig "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" received_sig"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 请求确实来自于插件")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 假的上报")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\n")])])]),v("h4",{attrs:{id:"node-js-koa"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#node-js-koa"}},[t._v("#")]),t._v(" Node.js + Koa")]),t._v(" "),v("div",{staticClass:"language-js extra-class"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" crypto "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'crypto'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" secret "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'some-secret'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 Koa 的请求 context 中")]),t._v("\nctx"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("assert")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'x-signature'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("401")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hmac "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" crypto"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHmac")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sha1'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" secret"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhmac"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rawBody"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sig "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hmac"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("digest")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hex'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nctx"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("assert")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("'x-signature'")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token template-string"}},[v("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v("sha1=")]),v("span",{pre:!0,attrs:{class:"token interpolation"}},[v("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("sig"),v("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),v("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),v("h2",{attrs:{id:"上报数据格式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据格式"}},[t._v("#")]),t._v(" 上报数据格式")]),t._v(" "),v("p",[t._v("每次上报的数据中必有的一个字段是 "),v("code",[t._v("post_type")]),t._v("，数据类型为字符串，用来指示此次上报的类型，有如下三种：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("上报类型")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("message")])]),t._v(" "),v("td",[t._v("收到消息")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("notice")])]),t._v(" "),v("td",[t._v("群、讨论组变动等通知类事件")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("request")])]),t._v(" "),v("td",[t._v("加好友请求、加群请求／邀请")])])])]),t._v(" "),v("p",[t._v("其它字段随上报类型不同而有所不同，下面将在事件列表的「上报数据」标题下一一给出。")]),t._v(" "),v("p",[t._v("某些字段的值是一些固定的值，在表格的「可能的值」中给出，如果「可能的值」为空则表示没有固定的可能性。")]),t._v(" "),v("p",[t._v("另外，每一次上报都有下面几个字段，后面不再列出。")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("time")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("事件发生的时间戳")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("self_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("收到消息的机器人 QQ 号")])])])]),t._v(" "),v("p",[t._v("关于上面的 "),v("code",[t._v("time")]),t._v(" 字段，由于 CKYU 的某次更新中移除了消息事件的 "),v("code",[t._v("time")]),t._v(" 参数，因此目前插件上报的数据中，"),v("code",[t._v("notice")]),t._v(" 和 "),v("code",[t._v("request")]),t._v(" 类型上报的 "),v("code",[t._v("time")]),t._v(" 是 CKYU 原生给出的时间，而 "),v("code",[t._v("message")]),t._v(" 类型的上报中的 "),v("code",[t._v("time")]),t._v(" 是事件到达插件的时间，后者有可能和事件实际的发生时间有差别。")]),t._v(" "),v("h2",{attrs:{id:"上报请求的响应数据格式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报请求的响应数据格式"}},[t._v("#")]),t._v(" 上报请求的响应数据格式")]),t._v(" "),v("p",[t._v("事件上报的后端可以在上报请求的响应中直接指定一些简单的操作，如快速回复、快速禁言等。如果不需要使用这个特性，返回 HTTP 响应状态码 204，或保持响应正文内容为空；如果需要，则使用 JSON 作为响应正文，"),v("code",[t._v("Content-Type")]),t._v(" 响应头任意（目前不会进行判断），但设置为 "),v("code",[t._v("application/json")]),t._v(" 最好，以便减少不必要的升级成本，因为如果以后有需求，可能会加入判断。")]),t._v(" "),v("p",[t._v("响应的 JSON 数据中，支持的操作随事件的不同而不同，会在后面的事件列表中的「响应数据」标题下一一给出。需要指出的是，"),v("strong",[t._v("响应数据中的每个字段都是可选的")]),t._v("，只有在字段存在（明确要求进行操作）时，才会触发相应的操作，否则将保持对 CKYU 整体运行状态影响最小的行为（比如默认不拦截事件、不回复消息、不处理请求，具体的默认行为下面会给出）。")]),t._v(" "),v("p",[t._v("「响应数据」给出的表格中的「允许的值」表示该字段允许的数据值，如果你返回的值不在允许的值范围内，则会采用默认行为，「允许的值」为空表示不限制。")]),t._v(" "),v("p",[v("strong",[t._v("每个事件都有一个共同的支持的操作，即 "),v("code",[t._v("block")]),t._v(" 字段")]),t._v("，数据类型为 boolean，"),v("code",[t._v("true")]),t._v(" 表示拦截事件（不再让后面的插件处理），否则表示忽略（不拦截），例如：")]),t._v(" "),v("div",{staticClass:"language-json extra-class"},[v("pre",{pre:!0,attrs:{class:"language-json"}},[v("code",[v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"block"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),v("p",[t._v("如果你在处理上报请求时，返回上面的 JSON 作为响应，则优先级在 CQHTTP 之后的其它插件将不会再收到这个事件。")]),t._v(" "),v("p",[t._v("此 "),v("code",[t._v("block")]),t._v(" 字段后面不再列出。")]),t._v(" "),v("p",[t._v("另外，"),v("code",[t._v("post_type")]),t._v(" 为 "),v("code",[t._v("notice")]),t._v(" 的上报请求，都只支持响应 "),v("code",[t._v("block")]),t._v(" 字段，而不支持其它操作。")]),t._v(" "),v("h2",{attrs:{id:"上报和回复中的数据类型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报和回复中的数据类型"}},[t._v("#")]),t._v(" 上报和回复中的数据类型")]),t._v(" "),v("p",[t._v("在下面对上报数据的描述中，「数据类型」使用 JSON 中的名字，例如 "),v("code",[t._v("string")]),t._v("、"),v("code",[t._v("number")]),t._v(" 等。")]),t._v(" "),v("p",[t._v("特别地，数据类型 "),v("code",[t._v("message")]),t._v(" 表示该参数是一个消息类型的参数。在上报数据中，"),v("code",[t._v("message")]),t._v(" 的实际类型根据配置项 "),v("code",[t._v("post_message_format")]),t._v(" 的不同而不同，"),v("code",[t._v("post_message_format")]),t._v(" 设置为 "),v("code",[t._v("string")]),t._v(" 和 "),v("code",[t._v("array")]),t._v(" 分别对应字符串和消息段数组；而在上报请求的回复中，"),v("code",[t._v("message")]),t._v(" 类型的字段允许接受字符串、消息段数组、单个消息段对象三种类型的数据。关于消息格式的更多细节请查看 "),v("a",{attrs:{href:"Message"}},[t._v("消息格式")]),t._v("。")]),t._v(" "),v("h2",{attrs:{id:"事件过滤"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#事件过滤"}},[t._v("#")]),t._v(" 事件过滤")]),t._v(" "),v("p",[t._v("如果需要对事件进行过滤，以减小后端的负担，请参考 "),v("a",{attrs:{href:"EventFilter"}},[t._v("事件过滤器")]),t._v("。")]),t._v(" "),v("h2",{attrs:{id:"事件列表"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#事件列表"}},[t._v("#")]),t._v(" 事件列表")]),t._v(" "),v("h3",{attrs:{id:"私聊消息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#私聊消息"}},[t._v("#")]),t._v(" 私聊消息")]),t._v(" "),v("h4",{attrs:{id:"上报数据"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("message")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("message_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("private")])]),t._v(" "),v("td",[t._v("消息类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sub_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("friend")]),t._v("、"),v("code",[t._v("group")]),t._v("、"),v("code",[t._v("discuss")]),t._v("、"),v("code",[t._v("other")])]),t._v(" "),v("td",[t._v("消息子类型，如果是好友则是 "),v("code",[t._v("friend")]),t._v("，如果从群或讨论组来的临时会话则分别是 "),v("code",[t._v("group")]),t._v("、"),v("code",[t._v("discuss")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("message_id")])]),t._v(" "),v("td",[t._v("number (int32)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("消息 ID")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("发送者 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("message")])]),t._v(" "),v("td",[t._v("message")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("消息内容")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("raw_message")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("原始消息内容")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("font")])]),t._v(" "),v("td",[t._v("number (int32)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("字体")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sender")])]),t._v(" "),v("td",[t._v("object")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("发送人信息")])])])]),t._v(" "),v("p",[t._v("其中 "),v("code",[t._v("sender")]),t._v(" 字段的内容如下：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("发送者 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("nickname")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("昵称")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sex")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("性别，"),v("code",[t._v("male")]),t._v(" 或 "),v("code",[t._v("female")]),t._v(" 或 "),v("code",[t._v("unknown")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("age")])]),t._v(" "),v("td",[t._v("number (int32)")]),t._v(" "),v("td",[t._v("年龄")])])])]),t._v(" "),v("p",[t._v("需要注意的是，"),v("code",[t._v("sender")]),t._v(" 中的各字段是尽最大努力提供的，也就是说，不保证每个字段都一定存在，也不保证存在的字段都是完全正确的（缓存可能过期）。")]),t._v(" "),v("h5",{attrs:{id:"示例"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),v("div",{staticClass:"language-json extra-class"},[v("pre",{pre:!0,attrs:{class:"language-json"}},[v("code",[v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"time"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1515204254")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"post_type"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message_type"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"private"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sub_type"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"friend"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message_id"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"user_id"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("12345678")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"你好～"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"raw_message"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"你好～"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("456")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sender"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nickname"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"小不点"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sex"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"male"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),v("span",{pre:!0,attrs:{class:"token property"}},[t._v('"age"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),v("p",[t._v("下面的其它事件同这个类似，将不再给出。")]),t._v(" "),v("h4",{attrs:{id:"响应数据"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应数据"}},[t._v("#")]),t._v(" 响应数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("默认情况")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("reply")])]),t._v(" "),v("td",[t._v("message")]),t._v(" "),v("td",[t._v("要回复的内容")]),t._v(" "),v("td",[t._v("不回复")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("auto_escape")])]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("消息内容是否作为纯文本发送（即不解析 CQ 码），只在 "),v("code",[t._v("reply")]),t._v(" 字段是字符串时有效")]),t._v(" "),v("td",[t._v("不转义")])])])]),t._v(" "),v("h3",{attrs:{id:"群消息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#群消息"}},[t._v("#")]),t._v(" 群消息")]),t._v(" "),v("h4",{attrs:{id:"上报数据-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据-2"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("message")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("message_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("group")])]),t._v(" "),v("td",[t._v("消息类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sub_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("normal")]),t._v("、"),v("code",[t._v("anonymous")]),t._v("、"),v("code",[t._v("notice")])]),t._v(" "),v("td",[t._v("消息子类型，正常消息是 "),v("code",[t._v("normal")]),t._v("，匿名消息是 "),v("code",[t._v("anonymous")]),t._v("，系统提示（如「管理员已禁止群内匿名聊天」）是 "),v("code",[t._v("notice")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("message_id")])]),t._v(" "),v("td",[t._v("number (int32)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("消息 ID")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("group_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("群号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("发送者 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("anonymous")])]),t._v(" "),v("td",[t._v("object")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("匿名信息，如果不是匿名消息则为 null")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("message")])]),t._v(" "),v("td",[t._v("message")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("消息内容")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("raw_message")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("原始消息内容")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("font")])]),t._v(" "),v("td",[t._v("number (int32)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("字体")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sender")])]),t._v(" "),v("td",[t._v("object")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("发送人信息")])])])]),t._v(" "),v("p",[t._v("其中 "),v("code",[t._v("anonymous")]),t._v(" 字段的内容如下：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("匿名用户 ID")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("name")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("匿名用户名称")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("flag")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("匿名用户 flag，在调用禁言 API 时需要传入")])])])]),t._v(" "),v("p",[v("code",[t._v("sender")]),t._v(" 字段的内容如下：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("发送者 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("nickname")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("昵称")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("card")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("群名片／备注")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sex")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("性别，"),v("code",[t._v("male")]),t._v(" 或 "),v("code",[t._v("female")]),t._v(" 或 "),v("code",[t._v("unknown")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("age")])]),t._v(" "),v("td",[t._v("number (int32)")]),t._v(" "),v("td",[t._v("年龄")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("area")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("地区")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("level")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("成员等级")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("role")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("角色，"),v("code",[t._v("owner")]),t._v(" 或 "),v("code",[t._v("admin")]),t._v(" 或 "),v("code",[t._v("member")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("title")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("专属头衔")])])])]),t._v(" "),v("p",[t._v("需要注意的是，"),v("code",[t._v("sender")]),t._v(" 中的各字段是尽最大努力提供的，也就是说，不保证每个字段都一定存在，也不保证存在的字段都是完全正确的（缓存可能过期）。尤其对于匿名消息，此字段不具有参考价值。")]),t._v(" "),v("h4",{attrs:{id:"响应数据-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应数据-2"}},[t._v("#")]),t._v(" 响应数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("默认情况")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("reply")])]),t._v(" "),v("td",[t._v("message")]),t._v(" "),v("td",[t._v("要回复的内容")]),t._v(" "),v("td",[t._v("不回复")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("auto_escape")])]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("消息内容是否作为纯文本发送（即不解析 CQ 码），只在 "),v("code",[t._v("reply")]),t._v(" 字段是字符串时有效")]),t._v(" "),v("td",[t._v("不转义")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("at_sender")])]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("是否要在回复开头 at 发送者（自动添加），发送者是匿名用户时无效")]),t._v(" "),v("td",[t._v("at 发送者")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("delete")])]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("撤回该条消息")]),t._v(" "),v("td",[t._v("不撤回")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("kick")])]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("把发送者踢出群组（需要登录号权限足够），"),v("strong",[t._v("不拒绝")]),t._v("此人后续加群请求，发送者是匿名用户时无效")]),t._v(" "),v("td",[t._v("不踢")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("ban")])]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("把发送者禁言 "),v("code",[t._v("ban_duration")]),t._v(" 指定时长，对匿名用户也有效")]),t._v(" "),v("td",[t._v("不禁言")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("ban_duration")])]),t._v(" "),v("td",[t._v("number")]),t._v(" "),v("td",[t._v("禁言时长")]),t._v(" "),v("td",[t._v("30 分钟")])])])]),t._v(" "),v("h3",{attrs:{id:"讨论组消息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#讨论组消息"}},[t._v("#")]),t._v(" 讨论组消息")]),t._v(" "),v("h4",{attrs:{id:"上报数据-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据-3"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("message")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("message_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("discuss")])]),t._v(" "),v("td",[t._v("消息类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("message_id")])]),t._v(" "),v("td",[t._v("number (int32)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("消息 ID")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("discuss_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("讨论组 ID")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("发送者 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("message")])]),t._v(" "),v("td",[t._v("message")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("消息内容")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("raw_message")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("原始消息内容")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("font")])]),t._v(" "),v("td",[t._v("number (int32)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("字体")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sender")])]),t._v(" "),v("td",[t._v("object")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("发送人信息")])])])]),t._v(" "),v("p",[t._v("其中 "),v("code",[t._v("sender")]),t._v(" 字段的内容如下：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("发送者 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("nickname")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("昵称")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sex")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("性别，"),v("code",[t._v("male")]),t._v(" 或 "),v("code",[t._v("female")]),t._v(" 或 "),v("code",[t._v("unknown")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("age")])]),t._v(" "),v("td",[t._v("number (int32)")]),t._v(" "),v("td",[t._v("年龄")])])])]),t._v(" "),v("h4",{attrs:{id:"响应数据-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应数据-3"}},[t._v("#")]),t._v(" 响应数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("默认情况")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("reply")])]),t._v(" "),v("td",[t._v("message")]),t._v(" "),v("td",[t._v("要回复的内容")]),t._v(" "),v("td",[t._v("不回复")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("auto_escape")])]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("消息内容是否作为纯文本发送（即不解析 CQ 码），只在 "),v("code",[t._v("reply")]),t._v(" 字段是字符串时有效")]),t._v(" "),v("td",[t._v("不转义")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("at_sender")])]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("是否要在回复开头 at 发送者（自动添加）")]),t._v(" "),v("td",[t._v("at 发送者")])])])]),t._v(" "),v("h3",{attrs:{id:"群文件上传"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#群文件上传"}},[t._v("#")]),t._v(" 群文件上传")]),t._v(" "),v("p",[v("strong",[t._v("注意：仅群文件上传表现为事件，好友发送文件在 CKYU 中没有独立的事件，而是直接表现为好友消息，请注意在编写业务逻辑时进行判断。")])]),t._v(" "),v("h4",{attrs:{id:"上报数据-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据-4"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("notice")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("notice_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("group_upload")])]),t._v(" "),v("td",[t._v("通知类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("group_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("群号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("发送者 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("file")])]),t._v(" "),v("td",[t._v("object")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("文件信息")])])])]),t._v(" "),v("p",[t._v("其中 "),v("code",[t._v("file")]),t._v(" 字段的内容如下：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("id")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("文件 ID")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("name")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("文件名")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("size")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("文件大小（字节数）")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("busid")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("busid（目前不清楚有什么作用）")])])])]),t._v(" "),v("h3",{attrs:{id:"群管理员变动"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#群管理员变动"}},[t._v("#")]),t._v(" 群管理员变动")]),t._v(" "),v("h4",{attrs:{id:"上报数据-5"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据-5"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("notice")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("notice_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("group_admin")])]),t._v(" "),v("td",[t._v("通知类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sub_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("set")]),t._v("、"),v("code",[t._v("unset")])]),t._v(" "),v("td",[t._v("事件子类型，分别表示设置和取消管理员")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("group_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("群号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("管理员 QQ 号")])])])]),t._v(" "),v("h3",{attrs:{id:"群成员减少"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#群成员减少"}},[t._v("#")]),t._v(" 群成员减少")]),t._v(" "),v("h4",{attrs:{id:"上报数据-6"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据-6"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("notice")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("notice_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("group_decrease")])]),t._v(" "),v("td",[t._v("通知类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sub_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("leave")]),t._v("、"),v("code",[t._v("kick")]),t._v("、"),v("code",[t._v("kick_me")])]),t._v(" "),v("td",[t._v("事件子类型，分别表示主动退群、成员被踢、登录号被踢")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("group_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("群号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("operator_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("操作者 QQ 号（如果是主动退群，则和 "),v("code",[t._v("user_id")]),t._v(" 相同）")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("离开者 QQ 号")])])])]),t._v(" "),v("h3",{attrs:{id:"群成员增加"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#群成员增加"}},[t._v("#")]),t._v(" 群成员增加")]),t._v(" "),v("h4",{attrs:{id:"上报数据-7"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据-7"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("notice")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("notice_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("group_increase")])]),t._v(" "),v("td",[t._v("通知类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sub_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("approve")]),t._v("、"),v("code",[t._v("invite")])]),t._v(" "),v("td",[t._v("事件子类型，分别表示管理员已同意入群、管理员邀请入群")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("group_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("群号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("operator_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("操作者 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("加入者 QQ 号")])])])]),t._v(" "),v("h3",{attrs:{id:"群禁言"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#群禁言"}},[t._v("#")]),t._v(" 群禁言")]),t._v(" "),v("h4",{attrs:{id:"上报数据-8"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据-8"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("notice")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("notice_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("group_ban")])]),t._v(" "),v("td",[t._v("通知类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sub_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("ban")]),t._v("、"),v("code",[t._v("lift_ban")])]),t._v(" "),v("td",[t._v("事件子类型，分别表示禁言、解除禁言")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("group_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("群号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("operator_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("操作者 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("被禁言 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("duration")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("禁言时长，单位秒")])])])]),t._v(" "),v("h3",{attrs:{id:"好友添加"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#好友添加"}},[t._v("#")]),t._v(" 好友添加")]),t._v(" "),v("h4",{attrs:{id:"上报数据-9"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据-9"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("notice")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("notice_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("friend_add")])]),t._v(" "),v("td",[t._v("通知类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("新添加好友 QQ 号")])])])]),t._v(" "),v("h3",{attrs:{id:"加好友请求"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#加好友请求"}},[t._v("#")]),t._v(" 加好友请求")]),t._v(" "),v("h4",{attrs:{id:"上报数据-10"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据-10"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("request")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("request_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("friend")])]),t._v(" "),v("td",[t._v("请求类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("发送请求的 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("comment")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("验证信息（可能包含 CQ 码，特殊字符被转义）")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("flag")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("请求 flag，在调用处理请求的 API 时需要传入")])])])]),t._v(" "),v("h4",{attrs:{id:"响应数据-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应数据-4"}},[t._v("#")]),t._v(" 响应数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("默认情况")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("approve")])]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("是否同意请求")]),t._v(" "),v("td",[t._v("不处理")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("remark")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("添加后的好友备注（仅在同意时有效）")]),t._v(" "),v("td",[t._v("无备注")])])])]),t._v(" "),v("h3",{attrs:{id:"加群请求／邀请"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#加群请求／邀请"}},[t._v("#")]),t._v(" 加群请求／邀请")]),t._v(" "),v("h4",{attrs:{id:"上报数据-11"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上报数据-11"}},[t._v("#")]),t._v(" 上报数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("request")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("request_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("group")])]),t._v(" "),v("td",[t._v("请求类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sub_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("add")]),t._v("、"),v("code",[t._v("invite")])]),t._v(" "),v("td",[t._v("请求子类型，分别表示加群请求、邀请登录号入群")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("group_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("群号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("user_id")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("发送请求的 QQ 号")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("comment")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("验证信息（可能包含 CQ 码，特殊字符被转义）")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("flag")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("请求 flag，在调用处理请求的 API 时需要传入")])])])]),t._v(" "),v("h4",{attrs:{id:"响应数据-5"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应数据-5"}},[t._v("#")]),t._v(" 响应数据")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("默认情况")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("approve")])]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("是否同意请求／邀请")]),t._v(" "),v("td",[t._v("不处理")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("reason")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[t._v("拒绝理由（仅在拒绝时有效）")]),t._v(" "),v("td",[t._v("无理由")])])])]),t._v(" "),v("h2",{attrs:{id:"元事件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#元事件"}},[t._v("#")]),t._v(" 元事件")]),t._v(" "),v("p",[t._v("上面的事件列表是 CKYU 直接支持的、QQ 机器人真实接收到的事件，除了这些，插件自己还会产生一类事件，这里称之为「元事件」，例如生命周期事件、心跳事件等，这类事件与插件（以及 CKYU）本身的运行状态有关，而与 QQ 无关。")]),t._v(" "),v("p",[t._v("元事件的上报方式和普通事件完全一样，"),v("code",[t._v("post_type")]),t._v(" 字段为 "),v("code",[t._v("meta_event")]),t._v("。")]),t._v(" "),v("h2",{attrs:{id:"元事件列表"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#元事件列表"}},[t._v("#")]),t._v(" 元事件列表")]),t._v(" "),v("h3",{attrs:{id:"生命周期"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("meta_event")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("meta_event_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("lifecycle")])]),t._v(" "),v("td",[t._v("元事件类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("sub_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("enable")]),t._v("、"),v("code",[t._v("disable")]),t._v("、"),v("code",[t._v("connect")])]),t._v(" "),v("td",[t._v("事件子类型，分别表示插件启用、插件停用、WebSocket 连接成功")])])])]),t._v(" "),v("p",[v("strong",[t._v("注意，目前生命周期元事件中，只有 HTTP 上报（配置了 "),v("code",[t._v("post_url")]),t._v(" ）的情况下可以收到 "),v("code",[t._v("enable")]),t._v(" 和 "),v("code",[t._v("disable")]),t._v("，只有 WebSocket 和反向 WebSocket 可以收到 "),v("code",[t._v("connect")]),t._v("。")])]),t._v(" "),v("h3",{attrs:{id:"心跳"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#心跳"}},[t._v("#")]),t._v(" 心跳")]),t._v(" "),v("p",[t._v("心跳类型的元事件需要通过设置配置项 "),v("code",[t._v("enable_heartbeat")]),t._v(" 为 "),v("code",[t._v("true")]),t._v(" 开启，并可通过 "),v("code",[t._v("heartbeat_interval")]),t._v(" 配置心跳间隔（单位毫秒）。")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("数据类型")]),t._v(" "),v("th",[t._v("可能的值")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("post_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("meta_event")])]),t._v(" "),v("td",[t._v("上报类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("meta_event_type")])]),t._v(" "),v("td",[t._v("string")]),t._v(" "),v("td",[v("code",[t._v("heartbeat")])]),t._v(" "),v("td",[t._v("元事件类型")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("status")])]),t._v(" "),v("td",[t._v("object")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("状态信息")])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("interval")])]),t._v(" "),v("td",[t._v("number (int64)")]),t._v(" "),v("td",[t._v("-")]),t._v(" "),v("td",[t._v("到下次心跳的间隔，单位毫秒")])])])]),t._v(" "),v("p",[t._v("其中 "),v("code",[t._v("status")]),t._v(" 字段的内容和 "),v("a",{attrs:{href:"API#%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE27"}},[v("code",[t._v("get_status")]),t._v(" 接口的响应数据")]),t._v(" 相同。")])])}),[],!1,null,null,null);_.default=s.exports}}]);