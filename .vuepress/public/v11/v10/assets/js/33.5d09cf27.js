(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{388:function(_,t,v){"use strict";v.r(t);var e=v(25),s=Object(e.a)({},(function(){var _=this,t=_.$createElement,v=_._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"事件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#事件"}},[_._v("#")]),_._v(" 事件")]),_._v(" "),v("p",[_._v("事件是用户需要从 CQHTTP 被动接受的数据，有以下几个大类：")]),_._v(" "),v("ul",[v("li",[_._v("消息事件，包括私聊消息、群消息等")]),_._v(" "),v("li",[_._v("通知事件，包括群成员变动、好友变动等")]),_._v(" "),v("li",[_._v("请求事件，包括加群请求、加好友请求等")]),_._v(" "),v("li",[_._v("元事件，包括 CQHTTP 生命周期、心跳等")])]),_._v(" "),v("p",[_._v("在所有能够推送事件的通信方式中（HTTP POST、正向和反向 WebSocket），事件都以 JSON 格式表示。")]),_._v(" "),v("h2",{attrs:{id:"内容字段"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#内容字段"}},[_._v("#")]),_._v(" 内容字段")]),_._v(" "),v("p",[_._v("每个事件都有 "),v("code",[_._v("time")]),_._v("、"),v("code",[_._v("self_id")]),_._v(" 和 "),v("code",[_._v("post_type")]),_._v(" 字段，如下：")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("字段名")]),_._v(" "),v("th",[_._v("数据类型")]),_._v(" "),v("th",[_._v("说明")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("time")])]),_._v(" "),v("td",[_._v("number (int64)")]),_._v(" "),v("td",[_._v("事件发生的时间戳")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("self_id")])]),_._v(" "),v("td",[_._v("number (int64)")]),_._v(" "),v("td",[_._v("收到事件的机器人 QQ 号")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("post_type")])]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("事件类型")])])])]),_._v(" "),v("p",[_._v("其中 "),v("code",[_._v("post_type")]),_._v(" 不同字段值表示的事件类型对应如下：")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("message")]),_._v("：消息事件")]),_._v(" "),v("li",[v("code",[_._v("notice")]),_._v("：通知事件")]),_._v(" "),v("li",[v("code",[_._v("request")]),_._v("：请求事件")]),_._v(" "),v("li",[v("code",[_._v("meta_event")]),_._v("：元事件")])]),_._v(" "),v("p",[_._v("其它字段随事件类型不同而有所不同，后面将在事件列表的「事件数据」小标题下给出。")]),_._v(" "),v("p",[_._v("某些字段的值是一些固定的值，在表格的「可能的值」中给出，如果「可能的值」为空则表示没有固定的可能性。")]),_._v(" "),v("h2",{attrs:{id:"快速操作"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#快速操作"}},[_._v("#")]),_._v(" 快速操作")]),_._v(" "),v("p",[_._v("如 "),v("RouterLink",{attrs:{to:"/specs/communication/http-post.html#快速操作"}},[_._v("HTTP POST 的快速操作")]),_._v(" 中所说，HTTP POST 通信方式下，用户可在服务端返回的响应中指定快速操作，事件支持的快速操作在事件列表的「快速操作」小标题下给出。")],1),_._v(" "),v("p",[_._v("在使用正向和反向 WebSocket 的情况下，可以通过 "),v("RouterLink",{attrs:{to:"/specs/api/hidden.html#handle-quick-operation-对事件执行快速操作"}},[v("code",[_._v(".handle_quick_operation")])]),_._v(" API 伪造快速操作。")],1),_._v(" "),v("h2",{attrs:{id:"数据类型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#数据类型"}},[_._v("#")]),_._v(" 数据类型")]),_._v(" "),v("p",[_._v("在后面的事件列表中，「数据类型」使用 JSON 中的名字，例如 "),v("code",[_._v("string")]),_._v("、"),v("code",[_._v("number")]),_._v(" 等。")]),_._v(" "),v("p",[_._v("特别地，数据类型 "),v("code",[_._v("message")]),_._v(" 表示该字段是一个消息类型的字段。在事件数据中，"),v("code",[_._v("message")]),_._v(" 的实际类型根据用户配置的消息格式的不同而不同，支持字符串和消息段数组两种格式；而在快速操作中，"),v("code",[_._v("message")]),_._v(" 类型的字段允许接受字符串、消息段数组、单个消息段对象三种类型的数据。关于消息格式的更多细节请查看 "),v("RouterLink",{attrs:{to:"/specs/message/"}},[_._v("消息")]),_._v("。")],1),_._v(" "),v("h2",{attrs:{id:"相关配置"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#相关配置"}},[_._v("#")]),_._v(" 相关配置")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("配置项名称")]),_._v(" "),v("th",[_._v("默认值")]),_._v(" "),v("th",[_._v("说明")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("event.message_format")])]),_._v(" "),v("td",[v("code",[_._v("string")])]),_._v(" "),v("td",[_._v("事件数据中的消息格式，"),v("code",[_._v("string")]),_._v(" 为字符串格式，"),v("code",[_._v("array")]),_._v(" 为消息段数组格式")])])])])])}),[],!1,null,null,null);t.default=s.exports}}]);